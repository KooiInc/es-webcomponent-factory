var l=v;function v(t,...e){let o=["NaN","null","undefined"],n=d=>typeof d=="symbol"?Symbol:d;return e.length>1?a(t,...e):r();function r(){let d=n(t),u=e.length>0;return e=u&&e.shift(),u&&c(e)?`${d}`==`${e}`:t===!1?e===Boolean?!0:"Boolean":p();function p(){let i=t===0?Number:t===""?String:d?Object.getPrototypeOf(t)?.constructor:{name:`${d}`};return e?e===i||e===Object.getPrototypeOf(i)||`${e}`===i?.name:i?.name}}function c(d){for(let u of o)if(u===`${d}`)return!0;return!1}function a(d,...u){for(let p of u)if(v(d,p))return!0;return!1}}function B({IS:t,tryJSON:e,contractsPrefix:o}={}){return o=o&&`${o}
`||"",{EN:{unknownOrNa:"unknown or n/a",unknown:"unknown",nameOkExpected:"The contract to add needs a name (String)",isMethodExpected:"The contract to add needs a method (Function)",expectedOkExpected:"The contract to add needs an expected value method (String|Function)",addContracts_Contract_Expected:"the parameter for [addContracts] should be at least { [contractName]: { method: Function, expected: String|Function } }",addContract_Contract_Expected:`addContract parameters should at least be {name, method, expected}
(when method is a named function, the name was derived from that)`,report_sorry:(n,r)=>`\u2718 ${o}Contract violation for contract [${n}], input ${r}`,report_forValue:n=>`${n}`,report_Expected:n=>`
${n}`,report_defaultValue:(n,r)=>n?"":`
Using the contract default value (${t(r,Function)?r.toString():t(r,String)?`"${r}"`:e(r)}) instead`},NL:{unknownOrNa:"onbekend of nvt",unknown:"onbekend",nameOkExpected:"Het contract moet een naam hebben (eigenschap name: String)",isMethodExpected:"Het contract moet kunnen worden uitgevoerd (eigenschap method: Function)",expectedOkExpected:"Het contract moet aangeven wat er wordt verwacht (eigenschap expected: String|Function)",addContracts_Contract_Expected:"De parameter for [addContracts] moet tenminste { [contractName]: { method: Function, expected: String|Function } } zijn",addContract_Contract_Expected:`De invoer vooor [addContract] moet tenminste {name, method, expected} zijn
(wanneer de eigenschap [method] een functie met naam was wordt [name] daarvan afgeleid)`,report_sorry:(n,r)=>`\u2718 ${o} Contractbreuk voor contract [${n}], input ${r}`,report_forValue:n=>`${n}`,report_Expected:n=>`
${n}`,report_defaultValue:(n,r)=>n?"":`
In plaats daarvan wordt de voor dit contract toegekende standaardwaarde (${t(r,Function)?r.toString():t(r,String)?`"${r}"`:e(r)}) gebruikt`}}}var s,_=P,O=M(),F=I();function P(t){d(t);let{reporter:e,logViolations:o,alwaysThrow:n,language:r,contractsPrefix:c}=t;s=B({IS:l,tryJSON:S,contractsPrefix:c})[r];let a={addContract:p,addContracts:u};return L(a),Object.freeze({contracts:a,IS:l,tryJSON:S});function d(i){i.reporter=i.reporter||k,i.logViolations=i.logViolations||!1,i.alwaysThrow=i.alwaysThrow||!1,i.language=i.language||"EN"}function u(i){if(!a.addContracts_Contract(i))return;let m=Object.entries(i);for(let[f,g]of m)p({...g,paramsChecked:!0,name:f})}function p(i=O.addContract){let{name:m,method:f,expected:g,defaultValue:C,customReport:y,reportFn:N,shouldThrow:V,reportViolationsByDefault:b,paramsChecked:w}=i;m=m||f?.name;let D=a.addContract_Contract||F.checkSingleContractParameters;if(!w&&!D({name:m,method:f,expected:g}))return;let R=j({name:m,method:f,expected:g,defaultValue:C,reporter:e,reportFn:N,customReport:y,reportViolationsByDefault:b,logViolations:o,shouldThrow:V,alwaysThrow:n});return Object.defineProperty(a,m,{value:R,enumerable:!0})}}function j(t=O.createContract){let{name:e,method:o,expected:n,defaultValue:r,customReport:c,reportFn:a,reporter:d,logViolations:u,shouldThrow:p,reportViolationsByDefault:i,alwaysThrow:m}=t;return function(f,...g){let C=o(f,...g),y=l(g[0],Object)&&{...g[0],value:f}||{value:f};if(a=a??d??k,l(c,Function)&&c(y),E(C)){let N=l(n,Function)?n(y):n;C=!E(y.defaultValue)||r?y.defaultValue||r:C;let[V,b]=[y.reportViolation??i,y.shouldThrow??p];if(V||b||u){let w=H({inputValue:f,defaultValue:C,shouldBe:N,fnName:e||o.name});if(b||m)throw new TypeError(w);d(w)}}return C}}function M(){let[t,e,o,n,r,c,a]=[...Array(7)];return{get reportViolations(){return{inputValue:a,defaultValue:n,shouldBe:s.unknowOrNa,fnName:s.unknown}},get createContract(){return{name:t,method:e,expected:o,defaultValue:n,customReport:r,reportFn:c,reporter:k,logViolations:!1,shouldThrow:!1,alwaysThrow:!1,reportViolationsByDefault:!1}},get addContract(){return{name:t,method:e,expected:o,defaultValue:n,customReport:r,reportFn:c,reporter:k,shouldThrow:!1,reportViolationsByDefault:!1,paramsChecked:!1}}}}function I(){let t=n=>l(n,String)&&n.trim().length,e=n=>l(n,String)&&n.length||l(n,Function),o=n=>l(n,Function);return{nameOk:t,expectedOk:e,isMethod:o,checkSingleContractParameters:({name:n,method:r,expected:c}={})=>n&&t(n)&&r&&o(r)&&c&&e(c)}}function L(t){let{nameOk:e,expectedOk:o,isMethod:n,checkSingleContractParameters:r}=F;t.addContract({method:e,expected:s.nameOkExpected,reportViolationsByDefault:!0}),t.addContract({method:n,expected:s.isMethodExpected,reportViolationsByDefault:!0}),t.addContract({method:o,expected:s.expectedOkExpected,reportViolationsByDefault:!0}),t.addContract({name:"addContracts_Contract",method:c=>l(c,Object)&&[...Object.entries(c)].filter(([,a])=>a.method&&n(a.method)&&a.expected&&o(a.expected)).length>0?c:void 0,expected:s.addContracts_Contract_Expected,reportViolationsByDefault:!0}),t.addContract({name:"addContract_Contract",method:r,expected:s.addContract_Contract_Expected,reportViolationsByDefault:!0})}function H(t=O.reportViolations){let{inputValue:e,defaultValue:o,shouldBe:n,fnName:r}=t,c=s.report_sorry(r,J(e)),a=s.report_forValue(c),d=s.report_Expected(n),u=s.report_defaultValue(E(o),o);return q(`${a}${d}${u}`)}function q(t,e=3){return t.replace(/\n/g,`
${" ".repeat(e)}`)}function E(t){return l(t,void 0,null,NaN)}function S(t){return z(()=>{let e=JSON.stringify(t);return/Infinity|NaN/.test(e)?e.replace(/"/g,""):e},t)}function J(t){let e=o=>l(o,String)?`"${o}"`:l(o,Object)?S(o):String(o);return l(t,String)?`"${t}"`:l(t,Object)?S(t):/Array\(/.test(t?.constructor.toString())?`[${[...t].map(e)}]`:String(t)}function k(t){console.info(t)}function z(t,e){try{return t()}catch(o){return console.error({isOk:o.name===expected,message:o.message,type:o.name}),e}}var{contracts:$,IS:h,tryJSON:W}=_({contractsPrefix:"[Web Component creator module]"});U();function U(){$.addContracts({componentName:{method:K,reportViolationsByDefault:!0,expected({customElementName:e}={}){return[`createComponent componentName: '${e??"*no name given*"}' is not a valid custom element name!`,"See https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name"].join(`
`)}},attrChange:{method:t,defaultValue:{attributes:[],method:function(){}},expected:"onAttrChange expected {attributes: Array, method: Function}"}});function t(e){let o=h(e,Object)&&r(e?.attributes)&&h(e?.method,Function);return e&&!o&&n(),o?e:void 0;function n(){let c=h(e?.method,Function)?"Function ok":"nothing or not a Function";console.log(["\u2718 [Web Component creator module]","createComponent onAttrChange: contract for  parameters violated",`Input: { attributes: ${W(e?.attributes)}, method: ${c} }`,"Input expected: nothing or { attributes: Array[string], method: Function({input}) {...} }","Will use default: { attributes: [], method: () => {} }"].join(`
   `))}function r(c){return h(c,Array)&&c.filter(a=>h(a,String)&&!/\s/g.test(a)).length===c.length&&c||void 0}}}function K(t){let e=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];return h(t,String)&&/\-{1,}/.test(t)&&t.toLowerCase()===t&&!e.find(o=>o===t)&&t||void 0}var A={};["a","area","audio","br","base","body","button","canvas","dl","data","datalist","div","em","fieldset","font","footer","form","hr","head","header","output","iframe","frameset","img","input","li","label","legend","link","map","mark","menu","media","meta","nav","meter","ol","object","optgroup","option","p","param","picture","pre","progress","quote","script","select","source","span","style","caption","td","col","table","tr","template","textarea","time","title","track","details","ul","video","del","ins","slot","blockquote","svg","dialog","summary","main","address","colgroup","tbody","tfoot","thead","th","dd","dt","figcaption","figure","i","b","code","h1","h2","h3","h4","abbr","bdo","dfn","kbd","q","rb","rp","rt","ruby","s","strike","samp","small","strong","sup","sub","u","var","wbr","nobr","tt","noscript"].forEach(t=>{Object.defineProperty(A,t,{get(){if(!t)return;let e=document.createElement(t)?.constructor;return e!==HTMLUnknownElement?e:void 0}})});var T=A;var x=nt();function ut(t){t=Y(t);let{componentName:e}=t;if($.componentName(e)&&!customElements.get(e)){let o=t.extends?.toLowerCase()?.trim(),n=T[o]??HTMLElement,r=G({forElem:n});X(r,t),!x.clientOnly&&x.report(`[factory] Registered component "${e}"`),customElements.define(e,r,{extends:o})}}function G({forElem:t}={}){let e=t;return function o(){return o.prototype=e.prototype,Q(o),Reflect.construct(e,[],o)}}function Q(t){if(!t.prototype.setComponentState){let e={},o=n=>n.hasAttribute("is")||/-/.test(n.tagName);Object.defineProperties(t.prototype,{myName:{get:function(){return et(this)}},state:{get:function(){return o(this)&&e[this.myName]||{}}},nth:{value:function(n){return h(n,Number,void 0)&&Z(this,n)||void 0}},instanceNr:{get(){return o(this)&&getInstancePositionInDom(this)}},setComponentState:{value:function(n){if(o(this)){let r=this.myName;Object.entries(n).forEach(([c,a])=>{e[r]=e[r]??{component:this.myName},e[r][c]=a})}}}})}}function X(t,e){let{onConnect:o,onDisconnect:n,onAdopted:r,onAttrChange:c}=e,[a,d]=[c.attributes,c.method];t.observedAttributes=a,t.prototype={connectedCallback:function(){let u=this;o(u),!x.clientOnly&&x.report(`[factory] (Re)connected an instance of &lt;${u.myName}>`)},disconnectedCallback(){let u=this;!x.clientOnly&&x.report(`[factory] Removed an instance of &lt;${u.myName}>`),n(this)},adoptedCallback(){return r(this)},attributeChangedCallback(u,p,i){if(a.length)return a.find(m=>m===u)&&d(this,u,p,i),!0}}}function Y(t){t.onAttrChange=$.attrChange(t.onAttrChange);let e=function(){};return t.onConnect=t.onConnect??e,t.onDisconnect=t.onDisconnect??e,t.onAdopted=t.onAdopted??e,t}function Z(t,e=1){return[...t.getRootNode().querySelectorAll(t.myName)].find((o,n)=>e===n+1)}function tt(){let t=new Date;return[t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()].reduce((e,o,n)=>`${e}${n<3?":":"."}${`${o}`.padStart(n<3?2:3,"0")}`,"").slice(1)}function et(t){let e=t.getAttribute("is");return`${t.tagName.toLowerCase()}${e?`[is='${e}']`:""}`}function lt(t,e={mode:"open"}){let o=t.shadowRoot;return o||t.attachShadow(e)}function st(t,e){if(t.state.styling)return t.state.styling;e=e.startsWith("#")?document.querySelector(e).content.querySelector("style").textContent:e,x.report(`[client] Storing embedded style for &lt;${t.myName}>`);let o=new CSSStyleSheet;return o.replaceSync(e),t.setComponentState({styling:o}),t.state.styling}function nt(){let t={"&lt;":"<","&gt;":">"},e=!1,o=function(a){console.info(`\u2714 ${a.replaceAll(/&lt;|&gt;/g,d=>t[d])}`)},n=o,r=function(){},c=!1;return{on(){e=!0},off(){e=!1},get now(){return tt},set clientOnly(a){c=h(a,Boolean)&&a||!1},get clientOnly(){return c},set report(a){n=a||o},get report(){return e&&n||r}}}export{lt as createOrRetrieveShadowRoot,ut as default,x as reporter,st as setComponentStyleFor};
