var l=V;function V(t,...e){let n=["NaN","null","undefined"],o=i=>typeof i=="symbol"?Symbol:i;return e.length>1?a(t,...e):r();function r(){let i=o(t),d=e.length>0;return e=d&&e.shift(),d&&c(e)?`${i}`==`${e}`:t===!1?e===Boolean?!0:"Boolean":s();function s(){let u=t===0?Number:t===""?String:i?Object.getPrototypeOf(t)?.constructor:{name:`${i}`};return e?e===u||e===Object.getPrototypeOf(u)||`${e}`===u?.name:u?.name}}function c(i){for(let d of n)if(d===`${i}`)return!0;return!1}function a(i,...d){for(let p of d)if(V(i,p))return!0;return!1}}function F({IS:t,tryJSON:e,contractsPrefix:n}={}){return n=n&&`${n}
`||"",{EN:{unknownOrNa:"unknown or n/a",unknown:"unknown",nameOkExpected:"The contract to add needs a name (String)",isMethodExpected:"The contract to add needs a method (Function)",expectedOkExpected:"The contract to add needs an expected value method (String|Function)",addContracts_Contract_Expected:"the parameter for [addContracts] should be at least { [contractName]: { method: Function, expected: String|Function } }",addContract_Contract_Expected:`addContract parameters should at least be {name, method, expected}
(when method is a named function, the name was derived from that)`,report_sorry:(o,r)=>`\u2718 ${n}Contract violation for contract [${o}], input ${r}`,report_forValue:o=>`${o}`,report_Expected:o=>`
${o}`,report_defaultValue:(o,r)=>o?"":`
Using the contract default value (${t(r,Function)?r.toString():t(r,String)?`"${r}"`:e(r)}) instead`},NL:{unknownOrNa:"onbekend of nvt",unknown:"onbekend",nameOkExpected:"Het contract moet een naam hebben (eigenschap name: String)",isMethodExpected:"Het contract moet kunnen worden uitgevoerd (eigenschap method: Function)",expectedOkExpected:"Het contract moet aangeven wat er wordt verwacht (eigenschap expected: String|Function)",addContracts_Contract_Expected:"De parameter for [addContracts] moet tenminste { [contractName]: { method: Function, expected: String|Function } } zijn",addContract_Contract_Expected:`De invoer vooor [addContract] moet tenminste {name, method, expected} zijn
(wanneer de eigenschap [method] een functie met naam was wordt [name] daarvan afgeleid)`,report_sorry:(o,r)=>`\u2718 ${n} Contractbreuk voor contract [${o}], input ${r}`,report_forValue:o=>`${o}`,report_Expected:o=>`
${o}`,report_defaultValue:(o,r)=>o?"":`
In plaats daarvan wordt de voor dit contract toegekende standaardwaarde (${t(r,Function)?r.toString():t(r,String)?`"${r}"`:e(r)}) gebruikt`}}}var m,D=P,_=j(),T=L();function P(t){i(t);let{reporter:e,logViolations:n,alwaysThrow:o,language:r,contractsPrefix:c}=t;m=F({IS:l,tryJSON:k,contractsPrefix:c})[r];let a={addContract:p,addContracts:d};return B(a),Object.freeze({contracts:a,IS:l,tryJSON:k});function i(s){s.reporter=s.reporter||N,s.logViolations=s.logViolations||!1,s.alwaysThrow=s.alwaysThrow||!1,s.language=s.language||"EN"}function d(s){if(!a.addContracts_Contract(s))return;let u=Object.entries(s);for(let[f,h]of u)p({...h,paramsChecked:!0,name:f})}function p(s=_.addContract){let{name:u,method:f,expected:h,defaultValue:C,customReport:g,reportFn:E,shouldThrow:O,reportViolationsByDefault:x,paramsChecked:w}=s;u=u||f?.name;let M=a.addContract_Contract||T.checkSingleContractParameters;if(!w&&!M({name:u,method:f,expected:h}))return;let R=I({name:u,method:f,expected:h,defaultValue:C,reporter:e,reportFn:E,customReport:g,reportViolationsByDefault:x,logViolations:n,shouldThrow:O,alwaysThrow:o});return Object.defineProperty(a,u,{value:R,enumerable:!0})}}function I(t=_.createContract){let{name:e,method:n,expected:o,defaultValue:r,customReport:c,reportFn:a,reporter:i,logViolations:d,shouldThrow:p,reportViolationsByDefault:s,alwaysThrow:u}=t;return function(f,...h){let C=n(f,...h),g=l(h[0],Object)&&{...h[0],value:f}||{value:f};if(a=a??i??N,l(c,Function)&&c(g),S(C)){let E=l(o,Function)?o(g):o;C=!S(g.defaultValue)||r?g.defaultValue||r:C;let[O,x]=[g.reportViolation??s,g.shouldThrow??p];if(O||x||d){let w=H({inputValue:f,defaultValue:C,shouldBe:E,fnName:e||n.name});if(x||u)throw new TypeError(w);i(w)}}return C}}function j(){let[t,e,n,o,r,c,a]=[...Array(7)];return{get reportViolations(){return{inputValue:a,defaultValue:o,shouldBe:m.unknowOrNa,fnName:m.unknown}},get createContract(){return{name:t,method:e,expected:n,defaultValue:o,customReport:r,reportFn:c,reporter:N,logViolations:!1,shouldThrow:!1,alwaysThrow:!1,reportViolationsByDefault:!1}},get addContract(){return{name:t,method:e,expected:n,defaultValue:o,customReport:r,reportFn:c,reporter:N,shouldThrow:!1,reportViolationsByDefault:!1,paramsChecked:!1}}}}function L(){let t=r=>l(r,String)&&r.trim().length,e=r=>l(r,String)&&r.length||l(r,Function),n=r=>l(r,Function);return{nameOk:t,expectedOk:e,isMethod:n,checkSingleContractParameters:({name:r,method:c,expected:a}={})=>r&&t(r)&&c&&n(c)&&a&&e(a)}}function B(t){let{nameOk:e,expectedOk:n,isMethod:o,checkSingleContractParameters:r}=T;t.addContract({method:e,expected:m.nameOkExpected,reportViolationsByDefault:!0}),t.addContract({method:o,expected:m.isMethodExpected,reportViolationsByDefault:!0}),t.addContract({method:n,expected:m.expectedOkExpected,reportViolationsByDefault:!0}),t.addContract({name:"addContracts_Contract",method:c=>l(c,Object)&&[...Object.entries(c)].filter(([,i])=>i.method&&o(i.method)&&i.expected&&n(i.expected)).length>0?c:void 0,expected:m.addContracts_Contract_Expected,reportViolationsByDefault:!0}),t.addContract({name:"addContract_Contract",method:r,expected:m.addContract_Contract_Expected,reportViolationsByDefault:!0})}function H(t=_.reportViolations){let{inputValue:e,defaultValue:n,shouldBe:o,fnName:r}=t,c=m.report_sorry(r,q(e)),a=m.report_forValue(c),i=m.report_Expected(o),d=m.report_defaultValue(S(n),n);return z(`${a}${i}${d}`)}function z(t,e=3){return t.replace(/\n/g,`
${" ".repeat(e)}`)}function S(t){return l(t,void 0,null,NaN)}function k(t){return U(()=>{let n=JSON.stringify(t);return/Infinity|NaN/.test(n)?n.replace(/"/g,""):n},t)}function q(t){let e=n=>l(n,String)?`"${n}"`:l(n,Object)?k(n):String(n);return l(t,String)?`"${t}"`:l(t,Object)?k(t):/Array\(/.test(t?.constructor.toString())?`[${[...t].map(e)}]`:String(t)}function N(t){console.info(t)}function U(t,e){try{return t()}catch(n){return console.error({isOk:n.name===expected,message:n.message,type:n.name}),e}}var{contracts:$,IS:y}=D({contractsPrefix:"[Web Component creator module]"});W();function W(){$.addContracts({componentName:{method:J,reportViolationsByDefault:!0,expected({customElementName:e}={}){return[`createComponent componentName: '${e??"*no name given*"}' is not a valid custom element name!`,"See https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name"].join(`
`)}},attrChange:{method:e=>y(e,Object)&&t(e?.attributes)&&y(e?.method,Function)?e:void 0,defaultValue:{attributes:[],method:function(){}},expected:"{attributes: Array, method: Function}"}});function t(e){return y(e,Array)&&e.filter(n=>y(n,String)&&!/\s/g.test(n)).length===e.length&&e||void 0}}function J(t){let e=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];return y(t,String)&&/\-{1,}/.test(t)&&t.toLowerCase()===t&&!e.find(n=>n===t)&&t||void 0}var v={};["a","area","audio","br","base","body","button","canvas","dl","data","datalist","div","em","fieldset","font","footer","form","hr","head","header","output","iframe","frameset","img","input","li","label","legend","link","map","mark","menu","media","meta","nav","meter","ol","object","optgroup","option","p","param","picture","pre","progress","quote","script","select","source","span","style","caption","td","col","table","tr","template","textarea","time","title","track","details","ul","video","del","ins","slot","blockquote","svg","dialog","summary","main","address","colgroup","tbody","tfoot","thead","th","dd","dt","figcaption","figure","i","b","code","h1","h2","h3","h4","abbr","bdo","dfn","kbd","q","rb","rp","rt","ruby","s","strike","samp","small","strong","sup","sub","u","var","wbr","nobr","tt","noscript"].forEach(t=>{Object.defineProperty(v,t,{get(){if(!t)return;let e=document.createElement(t)?.constructor;return e!==HTMLUnknownElement?e:void 0}})});var A=v;var b=et();function mt(t){t=X(t);let{componentName:e}=t;if($.componentName(e)&&!customElements.get(e)){let n=t.extends?.toLowerCase()?.trim(),o=A[n]??HTMLElement,r=K({forElem:o});Q(r,t),!b.clientOnly&&b.report(`[factory] Registered component "${e}"`),customElements.define(e,r,{extends:n})}}function K({forElem:t}={}){let e=t;return function n(){return n.prototype=e.prototype,G(n),Reflect.construct(e,[],n)}}function G(t){if(!t.prototype.setComponentState){let e={},n=o=>o.hasAttribute("is")||/-/.test(o.tagName);Object.defineProperties(t.prototype,{myName:{get:function(){return tt(this)}},state:{get:function(){return n(this)&&e[this.myName]||{}}},nth:{value:function(o){return y(o,Number,void 0)&&Y(this,o)||void 0}},instanceNr:{get(){return n(this)&&getInstancePositionInDom(this)}},setComponentState:{value:function(o){if(n(this)){let r=this.myName;Object.entries(o).forEach(([c,a])=>{e[r]=e[r]??{component:this.myName},e[r][c]=a})}}}})}}function Q(t,e){let{onConnect:n,onDisconnect:o,onAdopted:r,onAttrChange:c}=e,[a,i]=[c.attributes,c.method];t.observedAttributes=a,t.prototype={connectedCallback:function(){let d=this;n(d),!b.clientOnly&&b.report(`[factory] (Re)connected an instance of &lt;${d.myName}>`)},disconnectedCallback(){let d=this;!b.clientOnly&&b.report(`[factory] Removed an instance of &lt;${d.myName}>`),o(this)},adoptedCallback(){return r(this)},attributeChangedCallback(d,p,s){if(a.length)return a.find(u=>u===d)&&i(this,d,p,s),!0}}}function X(t){t.onAttrChange=$.attrChange(t.onAttrChange);let e=function(){};return t.onConnect=t.onConnect??e,t.onDisconnect=t.onDisconnect??e,t.onAdopted=t.onAdopted??e,t}function Y(t,e=1){return[...t.getRootNode().querySelectorAll(t.myName)].find((n,o)=>e===o+1)}function Z(){let t=new Date;return[t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()].reduce((e,n,o)=>`${e}${o<3?":":"."}${`${n}`.padStart(o<3?2:3,"0")}`,"").slice(1)}function tt(t){let e=t.getAttribute("is");return`${t.tagName.toLowerCase()}${e?`[is='${e}']`:""}`}function et(){let t={"&lt;":"<","&gt;":">"},e=!1,n=function(a){console.info(`\u2714 ${a.replaceAll(/&lt;|&gt;/g,i=>t[i])}`)},o=n,r=function(){},c=!1;return{on(){e=!0},off(){e=!1},get now(){return Z},set clientOnly(a){c=y(a,Boolean)&&a||!1},get clientOnly(){return c},set report(a){o=a||n},get report(){return e&&o||r}}}export{mt as default,b as reporter};
