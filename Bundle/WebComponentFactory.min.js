var s=F;function F(t,...e){let n=["NaN","null","undefined"],r=c=>typeof c=="symbol"?Symbol:c;return e.length>1?i(t,...e):o();function o(){let c=r(t),d=e.length>0;return e=d&&e.shift(),d&&a(e)?`${c}`==`${e}`:t===!1?e===Boolean?!0:"Boolean":f();function f(){let l=t===0?Number:t===""?String:c?Object.getPrototypeOf(t)?.constructor:{name:`${c}`};return e?e===l||e===Object.getPrototypeOf(l)||`${e}`===l?.name:l?.name}}function a(c){for(let d of n)if(d===`${c}`)return!0;return!1}function i(c,...d){for(let u of d)if(F(c,u))return!0;return!1}}function V({IS:t,tryJSON:e,contractsPrefix:n}={}){return n=n&&`${n}
`||"",{EN:{unknownOrNa:"unknown or n/a",unknown:"unknown",nameOkExpected:"The contract to add needs a name (String)",isMethodExpected:"The contract to add needs a method (Function)",expectedOkExpected:"The contract to add needs an expected value method (String|Function)",addContracts_Contract_Expected:"the parameter for [addContracts] should be at least { [contractName]: { method: Function, expected: String|Function } }",addContract_Contract_Expected:`addContract parameters should at least be {name, method, expected}
(when method is a named function, the name was derived from that)`,report_sorry:(r,o)=>`\u2718 ${n}Contract violation for contract [${r}], input ${o}`,report_forValue:r=>`${r}`,report_Expected:r=>`
${r}`,report_defaultValue:(r,o)=>r?"":`
Using the contract default value (${t(o,Function)?o.toString():t(o,String)?`"${o}"`:e(o)}) instead`},NL:{unknownOrNa:"onbekend of nvt",unknown:"onbekend",nameOkExpected:"Het contract moet een naam hebben (eigenschap name: String)",isMethodExpected:"Het contract moet kunnen worden uitgevoerd (eigenschap method: Function)",expectedOkExpected:"Het contract moet aangeven wat er wordt verwacht (eigenschap expected: String|Function)",addContracts_Contract_Expected:"De parameter for [addContracts] moet tenminste { [contractName]: { method: Function, expected: String|Function } } zijn",addContract_Contract_Expected:`De invoer vooor [addContract] moet tenminste {name, method, expected} zijn
(wanneer de eigenschap [method] een functie met naam was wordt [name] daarvan afgeleid)`,report_sorry:(r,o)=>`\u2718 ${n} Contractbreuk voor contract [${r}], input ${o}`,report_forValue:r=>`${r}`,report_Expected:r=>`
${r}`,report_defaultValue:(r,o)=>r?"":`
In plaats daarvan wordt de voor dit contract toegekende standaardwaarde (${t(o,Function)?o.toString():t(o,String)?`"${o}"`:e(o)}) gebruikt`}}}var m,D=T,_=I(),v=P();function T({reporter:t=E,logViolations:e=!1,alwaysThrow:n=!1,language:r="EN",contractsPrefix:o}={}){m=V({IS:s,tryJSON:w,contractsPrefix:o})[r];let a={addContract:c,addContracts:i};return j(a),Object.freeze({contracts:a,IS:s,tryJSON:w});function i(d){if(!a.addContracts_Contract(d))return;let u=Object.entries(d);for(let[f,l]of u)c({...l,paramsChecked:!0,name:f})}function c(d=_.addContract){let{name:u,method:f,expected:l,defaultValue:C,customReport:b,reportFn:g,shouldThrow:p,reportViolationsByDefault:$,paramsChecked:O}=d;u=u||f?.name;let x=a.addContract_Contract||v.checkSingleContractParameters;if(!O&&!x({name:u,method:f,expected:l}))return;let k=R({name:u,method:f,expected:l,defaultValue:C,reporter:t,reportFn:g,customReport:b,reportViolationsByDefault:$,logViolations:e,shouldThrow:p,alwaysThrow:n});return Object.defineProperty(a,u,{value:k,enumerable:!0})}}function R(t=_.createContract){let{name:e,method:n,expected:r,defaultValue:o,customReport:a,reportFn:i,reporter:c,logViolations:d,shouldThrow:u,reportViolationsByDefault:f,alwaysThrow:l}=t;return function(C,...b){let g=n(C,...b),p=s(b[0],Object)&&{...b[0],value:C}||{value:C};if(i=i??c??E,s(a,Function)&&a(p),S(g)){let $=s(r,Function)?r(p):r;g=!S(p.defaultValue)||o?p.defaultValue||o:g;let[O,x]=[p.reportViolation??f,p.shouldThrow??u];if(O||x||d){let k=L({inputValue:C,defaultValue:g,shouldBe:$,fnName:e||n.name});if(x||l)throw new TypeError(k);c(k)}}return g}}function I(){let[t,e,n,r,o,a,i]=[...Array(7)];return{get reportViolations(){return{inputValue:i,defaultValue:r,shouldBe:m.unknowOrNa,fnName:m.unknown}},get createContract(){return{name:t,method:e,expected:n,defaultValue:r,customReport:o,reportFn:a,reporter:E,logViolations:!1,shouldThrow:!1,alwaysThrow:!1,reportViolationsByDefault:!1}},get addContract(){return{name:t,method:e,expected:n,defaultValue:r,customReport:o,reportFn:a,reporter:E,shouldThrow:!1,reportViolationsByDefault:!1,paramsChecked:!1}}}}function P(){let t=o=>s(o,String)&&o.trim().length,e=o=>s(o,String)&&o.length||s(o,Function),n=o=>s(o,Function);return{nameOk:t,expectedOk:e,isMethod:n,checkSingleContractParameters:({name:o,method:a,expected:i}={})=>o&&t(o)&&a&&n(a)&&i&&e(i)}}function j(t){let{nameOk:e,expectedOk:n,isMethod:r,checkSingleContractParameters:o}=v;t.addContract({method:e,expected:m.nameOkExpected,reportViolationsByDefault:!0}),t.addContract({method:r,expected:m.isMethodExpected,reportViolationsByDefault:!0}),t.addContract({method:n,expected:m.expectedOkExpected,reportViolationsByDefault:!0}),t.addContract({name:"addContracts_Contract",method:a=>s(a,Object)&&[...Object.entries(a)].filter(([,c])=>c.method&&r(c.method)&&c.expected&&n(c.expected)).length>0?a:void 0,expected:m.addContracts_Contract_Expected,reportViolationsByDefault:!0}),t.addContract({name:"addContract_Contract",method:o,expected:m.addContract_Contract_Expected,reportViolationsByDefault:!0})}function L(t=_.reportViolations){let{inputValue:e,defaultValue:n,shouldBe:r,fnName:o}=t,a=m.report_sorry(o,H(e)),i=m.report_forValue(a),c=m.report_Expected(r),d=m.report_defaultValue(S(n),n);return B(`${i}${c}${d}`)}function B(t,e=3){return t.replace(/\n/g,`
${" ".repeat(e)}`)}function S(t){return s(t,void 0,null,NaN)}function w(t){return z(()=>{let n=JSON.stringify(t);return/Infinity|NaN/.test(n)?n.replace(/"/g,""):n},t)}function H(t){let e=n=>s(n,String)?`"${n}"`:s(n,Object)?w(n):String(n);return s(t,String)?`"${t}"`:s(t,Object)?w(t):/Array\(/.test(t?.constructor.toString())?`[${[...t].map(e)}]`:String(t)}function E(t){console.info(t)}function z(t,e){try{return t()}catch(n){return console.error({isOk:n.name===expected,message:n.message,type:n.name}),e}}var{contracts:N,IS:h}=D({contractsPrefix:"[Web Component creator module]"});q();function q(){N.addContracts({componentName:{method:U,reportViolationsByDefault:!0,expected({customElementName:e}={}){return[`createComponent componentName: '${e??"*no name given*"}' is not a valid custom element name!`,"See https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name"].join(`
`)}},attrChange:{method:e=>h(e,Object)&&t(e?.attributes)&&h(e?.method,Function)?e:void 0,defaultValue:{attributes:[],method:function(){}},expected:"{attributes: Array, method: Function}"}});function t(e){return h(e,Array)&&e.filter(n=>h(n,String)&&!/\s/g.test(n)).length===e.length&&e||void 0}}function U(t){let e=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];return h(t,String)&&/\-{1,}/.test(t)&&t.toLowerCase()===t&&!e.find(n=>n===t)&&t||void 0}var A={};["a","area","audio","br","base","body","button","canvas","dl","data","datalist","div","em","fieldset","font","footer","form","hr","head","header","output","iframe","frameset","img","input","li","label","legend","link","map","mark","menu","media","meta","nav","meter","ol","object","optgroup","option","p","param","picture","pre","progress","quote","script","select","source","span","style","caption","td","col","table","tr","template","textarea","time","title","track","details","ul","video","del","ins","slot","blockquote","svg","dialog","summary","main","address","colgroup","tbody","tfoot","thead","th","dd","dt","figcaption","figure","i","b","code","h1","h2","h3","h4","abbr","bdo","dfn","kbd","q","rb","rp","rt","ruby","s","strike","samp","small","strong","sup","sub","u","var","wbr","nobr","tt","noscript"].forEach(t=>{Object.defineProperty(A,t,{get(){if(!t)return;let e=document.createElement(t)?.constructor;return e!==HTMLUnknownElement?e:void 0}})});var M=A;var y=Z();function ut(t){t=G(t);let{componentName:e}=t;if(N.componentName(e)&&!customElements.get(e)){let n=t.extends?.toLowerCase()?.trim(),r=M[n]??HTMLElement,o=W({forElem:r});K(o,t),!y.clientOnly&&y.report(`[factory] Registered component "${e}"`),customElements.define(e,o,{extends:n})}}function W({forElem:t}={}){let e=t;return function n(){return n.prototype=e.prototype,J(n),Reflect.construct(e,[],n)}}function J(t,e){if(!t.prototype.setComponentState){let n={},r=o=>o.hasAttribute("is")||/-/.test(o.tagName);Object.defineProperties(t.prototype,{myName:{get:function(){return Y(this)}},state:{get:function(){return r(this)&&n[this.myName]||{}}},nth:{value:function(o){return h(o,Number,void 0)&&Q(this,o)||void 0}},instanceNr:{get(){return r(this)&&getInstancePositionInDom(this)}},setComponentState:{value:function(o){if(r(this)){let a=this.myName;Object.entries(o).forEach(([i,c])=>{n[a]=n[a]??{component:this.myName},n[a][i]=c})}}}})}}function K(t,e){let{onConnect:n,onDisconnect:r,onAdopted:o,onAttrChange:a}=e,[i,c]=[a.attributes,a.method];t.observedAttributes=i,t.prototype={connectedCallback:function(){let d=this;n(d),!y.clientOnly&&y.report(`[factory] (Re)connected an instance of &lt;${d.myName}>`)},disconnectedCallback(){let d=this;!y.clientOnly&&y.report(`[factory] Removed an instance of &lt;${d.myName}>`),r(this)},adoptedCallback(){return o(this)},attributeChangedCallback(d,u,f){if(i.length)return i.find(l=>l===d)&&c(this,d,u,f),!0}}}function G(t){t.onAttrChange=N.attrChange(t.onAttrChange);let e=function(){};return t.onConnect=t.onConnect??e,t.onDisconnect=t.onDisconnect??e,t.onAdopted=t.onAdopted??e,t}function Q(t,e=1){return[...t.getRootNode().querySelectorAll(t.myName)].find((n,r)=>e===r+1)}function X(){let t=new Date;return[t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()].reduce((e,n,r)=>`${e}${r<3?":":"."}${`${n}`.padStart(r<3?2:3,"0")}`,"").slice(1)}function Y(t){let e=t.getAttribute("is");return`${t.tagName.toLowerCase()}${e?`[is='${e}']`:""}`}function Z(){let t={"&lt;":"<","&gt;":">"},e=!1,n=function(i){console.info(`\u2714 ${i.replaceAll(/&lt;|&gt;/g,c=>t[c])}`)},r=n,o=function(){},a=!1;return{on(){e=!0},off(){e=!1},get now(){return X},set clientOnly(i){a=h(i,Boolean)&&i||!1},get clientOnly(){return a},set report(i){r=i||n},get report(){return e&&r||o}}}export{ut as default,y as reporter};
